import { GroupBox, Button, ScrollView } from "std-widgets.slint";
import { MainLogic, SettingsLogic, Page, Formating, Tab } from "common.slint";
import { TabBar } from "tab-bar.slint";
import { ModDetails, ModEdit } from "tabs.slint";

export component ModDetailsPage inherits Page {
    has-back-button: true;
    title: MainLogic.current-mods[mod-index].name;
    description: @tr("Edit registered mods here");
    // height: 400px;
    
    in property <int> mod-index;
    in-out property <int> current-tab;
    property <color> state-color: SettingsLogic.loader-disabled ? #d01616 : 
    MainLogic.current-mods[mod-index].enabled ? #206816 : #d01616;
    property <string> state: SettingsLogic.loader-disabled ? @tr("Mod Loader Disabled") : 
    MainLogic.current-mods[mod-index].enabled ? @tr("Mod Enabled") : @tr("Mod Disabled");

    info-text := HorizontalLayout {
        y: Formating.header-height - 10px;
        height: 25px;
        padding-right: 10px;
        Text {
            font-size: 16pt;
            color: state-color;
            text: state;
            horizontal-alignment: right;
        }
    }
    
    tab-bar := TabBar {
        y: Formating.header-height + 20px;
        model: [@tr("Tab" => "Details"), @tr("Tab" => "Edit")];
        current-item <=> current-tab;
    }
    
    if(tab-bar.current-item == 0) : ModDetails { 
        mod-index: mod-index; 
        height: root.height - Formating.header-height - info-text.height - tab-bar.height; 
        y: Formating.header-height + tab-bar.height + info-text.height; 
    }
    if(tab-bar.current-item == 1) : ModEdit {
        mod-index: mod-index; 
        height: root.height - Formating.header-height - info-text.height - tab-bar.height; 
        y: Formating.header-height + tab-bar.height + info-text.height; 
    }
    
}