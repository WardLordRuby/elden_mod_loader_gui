import { Button, VerticalBox, StandardListView, StandardButton } from "std-widgets.slint";
import { MainPage, MainLogic, DisplayMod } from "main.slint";
import { SettingsPage, SettingsLogic } from "settings.slint";

export { MainLogic, SettingsLogic, DisplayMod }

export component App inherits Window {
    preferred-height: 350px;
    // preferred-width: 460px;
    min-height: 250px;
    width: 315px;
    in-out property <int> focus_page: 1;
    in property <string> err-message;
    
    //in-out property<string> filepath: "\\"; ui_ref: {root.filepath} rs_ref: ui.set_filepath(ref)
    background: #0f161d;
    
    if(root.focus_page == 0) : MainPage {}
    if(root.focus_page == 1) : SettingsPage {}

    callback show_error_popup;
    show_error_popup => { err-popup.show(); }

    // Make popupWindow look nice 
    err_popup := PopupWindow {
        x: root.width / 2.7;
        y: root.height / 2.7;
        width: min(err_popup_layout.preferred-width, root.width - 80px);
        close-on-click: false;

        Rectangle {
            background: root.background;
            border-color: err_popup_text.color;
            border-width: 1px;
        }

        err_popup_layout := Dialog {
            height:100%; width: 100%;

            err_popup_text := Text {
                text: root.err-message;
                wrap: word-wrap;
            }

            StandardButton { kind: ok; clicked => { err-popup.close(); } }
        }
    }
}